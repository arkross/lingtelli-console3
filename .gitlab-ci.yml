image: python:3.6

services:
  - mysql:latest

variables:
  MYSQL_DATABASE: console
  MYSQL_USER: superuer
  MYSQL_PASSWORD: pass1234

stages:
  - build
  - test

build_env:
  only:
    - develop@gitlab-org/gitlab-ce
  stage: build
  script: pip install -r server/requirements.txt

test_backend:
  only:
    - develop@gitlab-org/gitlab-ce
  stage: test
  script: python manage.py test